<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glass Panel Order Tool - ViewRail</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
</head>
<body class="bg-gray-50">
    <div class="max-w-6xl mx-auto p-4 min-h-screen">
        <div class="bg-white rounded-lg shadow-lg overflow-hidden">
            <!-- Header -->
            <div class="bg-blue-600 text-white p-6">
                <div class="flex justify-between items-center">
                    <div>
                        <h1 class="text-3xl font-bold flex items-center gap-2">
                            <i data-lucide="calculator" class="h-8 w-8"></i>
                            Glass Panel Order Tool
                        </h1>
                        <p class="text-blue-100 mt-2">Configure your custom Starphire glass panels</p>
                    </div>
                    <button onclick="showAdminLogin()" class="px-4 py-2 bg-blue-500 hover:bg-blue-400 rounded-md transition-colors flex items-center gap-2">
                        <i data-lucide="settings" class="h-4 w-4"></i>
                        Admin
                    </button>
                </div>
            </div>

            <div class="p-6 grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- Configuration Panel -->
                <div class="space-y-6">
                    <!-- Dimensions -->
                    <div class="border rounded-lg p-4">
                        <h2 class="text-xl font-bold mb-4">Panel Dimensions</h2>
                        <div class="grid grid-cols-3 gap-4">
                            <div>
                                <label class="block text-sm font-medium mb-1">Width (inches)</label>
                                <input type="number" id="width" class="w-full p-2 border rounded" placeholder="36" onchange="updateCalculations()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-1">Height (inches)</label>
                                <input type="number" id="height" class="w-full p-2 border rounded" placeholder="42" onchange="updateCalculations()">
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-1">Quantity</label>
                                <input type="number" id="quantity" class="w-full p-2 border rounded" value="1" min="1" onchange="updateCalculations()">
                            </div>
                        </div>
                    </div>

                    <!-- Glass Type -->
                    <div class="border rounded-lg p-4">
                        <h2 class="text-xl font-bold mb-4">Glass Specifications</h2>
                        <div class="grid grid-cols-3 gap-4 mb-4">
                            <div>
                                <label class="block text-sm font-medium mb-1">Thickness</label>
                                <select id="thickness" class="w-full p-2 border rounded" onchange="updateGlassType()">
                                    <option value="10">10mm</option>
                                    <option value="12" selected>12mm</option>
                                    <option value="19">19mm</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-1">Type</label>
                                <select id="glassType" class="w-full p-2 border rounded" onchange="updateCalculations()">
                                    <option value="tempered">Starphire Tempered</option>
                                    <option value="laminated">Starphire Laminated</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium mb-1">Corners</label>
                                <select id="cornerType" class="w-full p-2 border rounded" onchange="updatePreview()">
                                    <option value="square">Square Corners</option>
                                    <option value="rounded">Rounded Corners</option>
                                </select>
                            </div>
                        </div>
                        <p class="text-xs text-blue-600">
                            <strong>Starphire:</strong> Premium low-iron glass with exceptional clarity
                        </p>
                    </div>

                    <!-- Holes Configuration -->
                    <div class="border rounded-lg p-4">
                        <h2 class="text-xl font-bold mb-4">Holes & Cutouts</h2>
                        <div class="space-y-4">
                            <div class="flex items-center gap-4">
                                <button onclick="addHole()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 flex items-center gap-2">
                                    <i data-lucide="plus" class="h-4 w-4"></i>
                                    Add Hole
                                </button>
                                <span class="text-sm text-gray-600">$25 per hole</span>
                            </div>
                            <div id="holesList" class="space-y-2">
                                <!-- Dynamic holes list -->
                            </div>
                        </div>
                    </div>

                    <!-- Quote Request Form -->
                    <div class="border rounded-lg p-4">
                        <h2 class="text-xl font-bold mb-4">Request Quote</h2>
                        <div class="space-y-4">
                            <div class="grid grid-cols-2 gap-4">
                                <input type="text" id="customerName" placeholder="Full Name *" class="p-2 border rounded" required>
                                <input type="email" id="customerEmail" placeholder="Email Address *" class="p-2 border rounded" required>
                            </div>
                            <div class="grid grid-cols-3 gap-2">
                                <input type="text" id="customerCity" placeholder="City" class="p-2 border rounded">
                                <input type="text" id="customerState" placeholder="State" class="p-2 border rounded" maxlength="2" onchange="updateCalculations()">
                                <input type="text" id="customerZip" placeholder="ZIP" class="p-2 border rounded">
                            </div>
                            <button onclick="submitQuote()" class="w-full px-4 py-3 bg-blue-600 text-white rounded font-medium hover:bg-blue-700">
                                Request Quote - <span id="totalPrice">$0.00</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Preview & Pricing -->
                <div class="space-y-6">
                    <!-- Glass Panel Preview -->
                    <div class="border rounded-lg p-4">
                        <h2 class="text-xl font-bold mb-4">Panel Preview</h2>
                        <div class="bg-gray-100 rounded-lg p-4 flex items-center justify-center" style="height: 300px;">
                            <div id="glassPreview" class="bg-blue-100 border-2 border-blue-300 shadow-lg relative" style="width: 150px; height: 200px; transition: all 0.3s ease;">
                                <div class="absolute inset-2 bg-gradient-to-br from-blue-50 to-blue-100 opacity-80"></div>
                                <div id="holesContainer" class="absolute inset-0">
                                    <!-- Dynamic holes will be added here -->
                                </div>
                                <div class="absolute bottom-2 left-2 text-xs font-medium text-blue-800">
                                    <div id="previewDimensions">36" × 42"</div>
                                    <div id="previewGlass">12mm Starphire Tempered</div>
                                    <div id="previewCorners">Square Corners</div>
                                </div>
                            </div>
                        </div>
                        <p class="text-xs text-gray-500 text-center mt-2">
                            Preview shows relative proportions. Actual glass will be crystal clear.
                        </p>
                    </div>

                    <!-- Pricing -->
                    <div class="border rounded-lg p-4">
                        <h2 class="text-xl font-bold mb-4">Price Breakdown</h2>
                        <div class="space-y-2 text-sm" id="priceBreakdown">
                            <!-- Dynamic pricing content -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Login Modal -->
    <div id="adminModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 hidden">
        <div class="bg-white rounded-lg p-6 w-96 max-w-md mx-4">
            <h2 class="text-xl font-bold mb-4">Admin Access</h2>
            <div class="space-y-4">
                <input type="password" id="adminPassword" class="w-full p-2 border rounded" placeholder="Enter admin password">
                <div id="passwordError" class="text-red-600 text-sm hidden">Incorrect password</div>
                <div class="flex gap-2 justify-end">
                    <button onclick="hideAdminLogin()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400">Cancel</button>
                    <button onclick="loginAdmin()" class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Login</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin Panel -->
    <div id="adminPanel" class="fixed inset-0 bg-gray-100 z-50 hidden overflow-y-auto">
        <div class="max-w-6xl mx-auto p-6">
            <div class="bg-red-600 text-white p-4 rounded mb-6">
                <div class="flex justify-between items-center">
                    <h1 class="text-2xl font-bold">Admin Portal</h1>
                    <button onclick="logoutAdmin()" class="px-4 py-2 bg-red-500 hover:bg-red-400 rounded">
                        Logout
                    </button>
                </div>
            </div>
            
            <div class="space-y-6">
                <!-- Glass Pricing -->
                <div class="bg-white border rounded-lg p-4">
                    <h2 class="text-lg font-bold mb-4">Glass Types & Pricing</h2>
                    <div class="grid grid-cols-3 gap-4 mb-4">
                        <div>
                            <label class="block font-medium mb-1">10mm Starphire Tempered ($/sq ft)</label>
                            <input type="number" id="price-10-tempered" step="0.01" class="w-full p-2 border rounded" onchange="updatePricing()">
                        </div>
                        <div>
                            <label class="block font-medium mb-1">12mm Starphire Tempered ($/sq ft)</label>
                            <input type="number" id="price-12-tempered" step="0.01" class="w-full p-2 border rounded" onchange="updatePricing()">
                        </div>
                        <div>
                            <label class="block font-medium mb-1">19mm Starphire Tempered ($/sq ft)</label>
                            <input type="number" id="price-19-tempered" step="0.01" class="w-full p-2 border rounded" onchange="updatePricing()">
                        </div>
                    </div>
                    <div class="grid grid-cols-3 gap-4">
                        <div>
                            <label class="block font-medium mb-1 text-gray-400">10mm Starphire Laminated</label>
                            <input type="number" step="0.01" class="w-full p-2 border rounded bg-gray-100" disabled>
                            <p class="text-xs text-gray-400 mt-1">Not available</p>
                        </div>
                        <div>
                            <label class="block font-medium mb-1">12mm Starphire Laminated ($/sq ft)</label>
                            <input type="number" id="price-12-laminated" step="0.01" class="w-full p-2 border rounded" onchange="updatePricing()">
                        </div>
                        <div>
                            <label class="block font-medium mb-1">19mm Starphire Laminated ($/sq ft)</label>
                            <input type="number" id="price-19-laminated" step="0.01" class="w-full p-2 border rounded" onchange="updatePricing()">
                        </div>
                    </div>
                </div>

                <!-- Shipping Regions -->
                <div class="bg-white border rounded-lg p-4">
                    <h2 class="text-lg font-bold mb-4">Shipping Regions</h2>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block font-medium mb-1">Midwest ($)</label>
                            <input type="number" id="shipping-midwest" class="w-full p-2 border rounded" onchange="updateShipping()">
                            <p class="text-xs text-gray-500">IL, IN, IA, WI, MI, OH, MO, KS, NE</p>
                        </div>
                        <div>
                            <label class="block font-medium mb-1">West of Rockies ($)</label>
                            <input type="number" id="shipping-west" class="w-full p-2 border rounded" onchange="updateShipping()">
                            <p class="text-xs text-gray-500">CA, OR, WA, NV, AZ, UT, CO, NM, WY, MT, ID</p>
                        </div>
                        <div>
                            <label class="block font-medium mb-1">Southeast ($)</label>
                            <input type="number" id="shipping-southeast" class="w-full p-2 border rounded" onchange="updateShipping()">
                            <p class="text-xs text-gray-500">FL, GA, AL, MS, TN, KY, NC, SC, VA, WV</p>
                        </div>
                        <div>
                            <label class="block font-medium mb-1">Northeast ($)</label>
                            <input type="number" id="shipping-northeast" class="w-full p-2 border rounded" onchange="updateShipping()">
                            <p class="text-xs text-gray-500">NY, PA, NJ, CT, MA, RI, VT, NH, ME, MD, DE</p>
                        </div>
                    </div>
                </div>

                <!-- Hole Pricing -->
                <div class="bg-white border rounded-lg p-4">
                    <h2 class="text-lg font-bold mb-4">Hole Pricing</h2>
                    <div class="grid grid-cols-1 gap-4">
                        <div>
                            <label class="block font-medium mb-1">Standard Hole Price ($)</label>
                            <input type="number" id="hole-price" step="0.01" class="w-full p-2 border rounded" onchange="updateHolePricing()">
                            <p class="text-xs text-gray-500">Price per hole, regardless of diameter</p>
                        </div>
                    </div>
                </div>

                <div class="text-center">
                    <button onclick="saveConfig()" class="px-6 py-3 bg-green-600 text-white rounded font-medium hover:bg-green-700">
                        Save Configuration
                    </button>
                    <div id="saveSuccess" class="text-green-600 text-sm mt-2 hidden">Configuration saved successfully!</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Glass pricing configuration
        let glassPrices = {
            '10': { tempered: 8.50, laminated: 9.25 },
            '12': { tempered: 10.75, laminated: 11.50 },
            '19': { tempered: 15.25, laminated: 16.00 }
        };

        let shippingRegions = {
            'IL,IN,IA,WI,MI,OH,MO,KS,NE': 250,
            'CA,OR,WA,NV,AZ,UT,CO,NM,WY,MT,ID': 1000,
            'FL,GA,AL,MS,TN,KY,NC,SC,VA,WV': 750,
            'NY,PA,NJ,CT,MA,RI,VT,NH,ME,MD,DE': 750
        };

        function updateGlassType() {
            const thickness = document.getElementById('thickness').value;
            const glassTypeSelect = document.getElementById('glassType');
            
            // Clear existing options
            glassTypeSelect.innerHTML = '';
            
            if (thickness === '10') {
                glassTypeSelect.innerHTML = '<option value="tempered">Starphire Tempered</option>';
            } else {
                glassTypeSelect.innerHTML = `
                    <option value="tempered">Starphire Tempered</option>
                    <option value="laminated">Starphire Laminated</option>
                `;
            }
            
            updateCalculations();
            updatePreview();
        }

        function updatePreview() {
            const width = parseFloat(document.getElementById('width').value) || 36;
            const height = parseFloat(document.getElementById('height').value) || 42;
            const thickness = document.getElementById('thickness').value;
            const glassType = document.getElementById('glassType').value;
            
            // Update preview dimensions and text
            document.getElementById('previewDimensions').textContent = `${width}" × ${height}"`;
            document.getElementById('previewGlass').textContent = `${thickness}mm Starphire ${glassType}`;
            
            // Scale preview proportionally
            const maxWidth = 150;
            const maxHeight = 200;
            const ratio = Math.min(maxWidth / width, maxHeight / height);
            const previewWidth = width * ratio;
            const previewHeight = height * ratio;
            
            const preview = document.getElementById('glassPreview');
            preview.style.width = `${previewWidth}px`;
            preview.style.height = `${previewHeight}px`;
            
            // Update colors based on glass type
            if (glassType === 'laminated') {
                preview.style.borderColor = '#10b981';
                preview.className = preview.className.replace('border-blue-300', 'border-green-500');
            } else {
                preview.style.borderColor = '#3b82f6';
                preview.className = preview.className.replace('border-green-500', 'border-blue-300');
            }
        }

        function updateCalculations() {
            const width = parseFloat(document.getElementById('width').value) || 0;
            const height = parseFloat(document.getElementById('height').value) || 0;
            const quantity = parseInt(document.getElementById('quantity').value) || 1;
            const thickness = document.getElementById('thickness').value;
            const glassType = document.getElementById('glassType').value;
            const customerState = document.getElementById('customerState').value.toUpperCase();

            const sqft = (width * height) / 144;
            const basePrice = glassPrices[thickness][glassType] * sqft * quantity;
            
            let shippingFee = 250; // default
            for (const [states, fee] of Object.entries(shippingRegions)) {
                if (states.split(',').includes(customerState)) {
                    shippingFee = fee;
                    break;
                }
            }

            const total = basePrice + shippingFee;

            document.getElementById('priceBreakdown').innerHTML = `
                <div class="flex justify-between">
                    <span>Glass (${sqft.toFixed(2)} sq ft × ${quantity})</span>
                    <span>${basePrice.toFixed(2)}</span>
                </div>
                <div class="text-xs text-gray-500 ml-2">
                    ${thickness}mm Starphire ${glassType} @ ${glassPrices[thickness][glassType].toFixed(2)}/sq ft
                </div>
                <div class="flex justify-between">
                    <span>Shipping${customerState ? ` (${customerState})` : ''}</span>
                    <span>${shippingFee.toFixed(2)}</span>
                </div>
                <div class="border-t pt-2 flex justify-between font-bold text-lg">
                    <span>Total</span>
                    <span>${total.toFixed(2)}</span>
                </div>
            `;

            document.getElementById('totalPrice').textContent = `${total.toFixed(2)}`;
            updatePreview();
        }

        function submitQuote() {
            const name = document.getElementById('customerName').value;
            const email = document.getElementById('customerEmail').value;
            
            if (!name || !email) {
                alert('Please fill in your name and email address.');
                return;
            }

            const width = document.getElementById('width').value;
            const height = document.getElementById('height').value;
            const quantity = document.getElementById('quantity').value;
            const thickness = document.getElementById('thickness').value;
            const glassType = document.getElementById('glassType').value;
            const city = document.getElementById('customerCity').value;
            const state = document.getElementById('customerState').value;
            const zip = document.getElementById('customerZip').value;
            const total = document.getElementById('totalPrice').textContent;

            const subject = `Glass Panel Quote Request - ${total}`;
            const body = `Customer Information:
Name: ${name}
Email: ${email}
City: ${city}
State: ${state}
ZIP: ${zip}

Panel Specifications:
Size: ${width}" × ${height}"
Quantity: ${quantity}
Glass Type: ${thickness}mm Starphire ${glassType}

Total: ${total}

Please provide a formal quote for the above specifications.

Thank you!`;

            // Try to open email client
            const mailtoLink = `mailto:jj.johnson@viewrail.com?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
            
            // Create temporary link and click it
            const tempLink = document.createElement('a');
            tempLink.href = mailtoLink;
            tempLink.style.display = 'none';
            document.body.appendChild(tempLink);
            tempLink.click();
            document.body.removeChild(tempLink);

            // Show confirmation
            alert(`Quote request prepared!\n\nTotal: ${total}\n\nYour email client should open with the quote details. If it doesn't open automatically, please email jj.johnson@viewrail.com with your specifications.`);
        }

        function showAdminLogin() {
            document.getElementById('adminModal').classList.remove('hidden');
        }

        function hideAdminLogin() {
            document.getElementById('adminModal').classList.add('hidden');
            document.getElementById('adminPassword').value = '';
            document.getElementById('passwordError').classList.add('hidden');
        }

        function loginAdmin() {
            const password = document.getElementById('adminPassword').value;
            if (password === 'ViewRail2024!') {
                hideAdminLogin();
                showAdminPanel();
            } else {
                document.getElementById('passwordError').classList.remove('hidden');
                document.getElementById('adminPassword').value = '';
            }
        }

        function showAdminPanel() {
            document.getElementById('adminPanel').classList.remove('hidden');
            
            // Load current prices into admin form
            document.getElementById('price-10-tempered').value = glassPrices['10'].tempered;
            document.getElementById('price-12-tempered').value = glassPrices['12'].tempered;
            document.getElementById('price-19-tempered').value = glassPrices['19'].tempered;
            document.getElementById('price-12-laminated').value = glassPrices['12'].laminated;
            document.getElementById('price-19-laminated').value = glassPrices['19'].laminated;
            
            // Load shipping prices
            document.getElementById('shipping-midwest').value = shippingRegions['IL,IN,IA,WI,MI,OH,MO,KS,NE'];
            document.getElementById('shipping-west').value = shippingRegions['CA,OR,WA,NV,AZ,UT,CO,NM,WY,MT,ID'];
            document.getElementById('shipping-southeast').value = shippingRegions['FL,GA,AL,MS,TN,KY,NC,SC,VA,WV'];
            document.getElementById('shipping-northeast').value = shippingRegions['NY,PA,NJ,CT,MA,RI,VT,NH,ME,MD,DE'];
        }

        function logoutAdmin() {
            document.getElementById('adminPanel').classList.add('hidden');
        }

        function updatePricing() {
            glassPrices['10'].tempered = parseFloat(document.getElementById('price-10-tempered').value) || 0;
            glassPrices['12'].tempered = parseFloat(document.getElementById('price-12-tempered').value) || 0;
            glassPrices['19'].tempered = parseFloat(document.getElementById('price-19-tempered').value) || 0;
            glassPrices['12'].laminated = parseFloat(document.getElementById('price-12-laminated').value) || 0;
            glassPrices['19'].laminated = parseFloat(document.getElementById('price-19-laminated').value) || 0;
            
            updateCalculations();
        }

        function updateShipping() {
            shippingRegions['IL,IN,IA,WI,MI,OH,MO,KS,NE'] = parseFloat(document.getElementById('shipping-midwest').value) || 0;
            shippingRegions['CA,OR,WA,NV,AZ,UT,CO,NM,WY,MT,ID'] = parseFloat(document.getElementById('shipping-west').value) || 0;
            shippingRegions['FL,GA,AL,MS,TN,KY,NC,SC,VA,WV'] = parseFloat(document.getElementById('shipping-southeast').value) || 0;
            shippingRegions['NY,PA,NJ,CT,MA,RI,VT,NH,ME,MD,DE'] = parseFloat(document.getElementById('shipping-northeast').value) || 0;
            
            updateCalculations();
        }

        function saveConfig() {
            document.getElementById('saveSuccess').classList.remove('hidden');
            setTimeout(() => {
                document.getElementById('saveSuccess').classList.add('hidden');
            }, 3000);
        }

        // Initialize lucide icons
        lucide.createIcons();
        
        // Initialize calculations and preview
        updateCalculations();
        updatePreview();
    </script>
</body>
</html>
